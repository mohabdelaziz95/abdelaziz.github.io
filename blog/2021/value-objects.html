<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Value Objects - Your Savior from Primitive obsession - Mohamed AbdElaziz</title>
    <meta name="Mohamed AbdElaziz" content="name"/>
    <meta name="og:title" content="Value Objects - Your Savior from Primitive obsession">
    <meta property="og:url" content="https://mohabdelaziz95.github.io/blog/2021/value-objects">
    <meta name="og:description"
          content="Save your codebase from naive primitive types no more (int, string, etc..) but meaningful types">
    <meta property="og:image" content="/assets/images/posts/4334233.jpg">
    <meta name="keywords" content="Value Objects, Primitive Obsession">
    <meta property="og:locale" content="en">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Value Objects - Your Savior from Primitive Obsession">
    <meta property="twitter:description"
          content="Save your codebase from naive primitive types no more (int, string, etc..) but meaningful types">
    <meta property="twitter:image" content="/assets/images/posts/4334233.jpg">
    <meta property="twitter:site" content="Mohamed AbdElaziz - Backend Engineer">
    <meta property="twitter:creator" content="@mohabdelaziz95">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">
    <meta name="author" content="Mohamed AbdElaziz (mohabdelaziz95)">

    <link rel="apple-touch-icon" sizes="57x57" href="../../assets/icons/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../../assets/icons/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../assets/icons/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../../assets/icons/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../assets/icons/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../../assets/icons/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../../assets/icons/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../../assets/icons/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../assets/icons/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../../assets/icons/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../assets/icons/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../assets/icons/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../assets/icons/favicons/favicon-16x16.png">
    <link rel="manifest" href="../../assets/icons/favicons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- styles -->
    <link href="../../assets/css/tailwind.min.css" rel="stylesheet">

    <style>
        blockquote p:before {
            color: #3a3a3a;
            content: open-quote;
            font-size: 4em;
            line-height: 0.1em;
            vertical-align: -0.4em;
        }

        blockquote p:after {
            color: #3a3a3a;
            content: close-quote;
            font-size: 4em;
            line-height: 0.1em;
            vertical-align: -0.4em;
        }

        ::selection {
            background: #FFF7B1;
        }
    </style>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cardo&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi&display=swap" rel="stylesheet">
</head>

<body class="font-sans bg-gray-100 leading-normal tracking-normal flex flex-col h-screen justify-between">

<!------------------------------------ <Header> ------------------------------------>
<nav id="header" class="fixed w-full z-10 top-0">

    <div id="progress" class="h-0.5 z-20 top-0"
         style="background:linear-gradient(to right, #C90B0C var(--scroll), transparent 0);"></div>

    <div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 pt-3">

        <div class="pl-4 lg:hidden">
            <a class="no-underline hover:no-underline" href="https://mohabdelaziz95.github.io/">
                <img class="h-12 rounded-full border-2 border-gray-200"
                     src="../../assets/images/me.jpg" alt="Profile Image">
            </a>
        </div>

        <div class="block lg:hidden px-4 pb-3">
            <button id="nav-toggle"
                    class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-gray-500 appearance-none focus:outline-none">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <title>Menu</title>
                    <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/>
                </svg>
            </button>
        </div>

        <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20"
             id="nav-content">
            <ul class="list-reset lg:flex justify-center flex-1 items-center">
                <li class="mr-0">
                    <a class="inline-block py-2 px-4 text-gray-900 font-bold no-underline"
                       href="https://mohabdelaziz95.github.io/">Home</a>
                </li>

                <li class="mr-0">
                    <a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4"
                       href="https://mohabdelaziz95.github.io/blog">Blog</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!------------------------------------ </Header> ------------------------------------>

<!------------------------------------ <Container> ------------------------------------>
<div class="container bg-white w-full md:max-w-5xl mx-auto pt-5 pb-10" style="font-family: 'Cardo', serif;">
    <div class="w-full px-4 md:px-6 text-xl text-gray-800 leading-normal pt-12">

        <!-------------- <Post Head> -------------->
        <div class="items-start pb-5">
            <h1 class="font-normal break-normal text-gray-700 pt-6 pb-2 text-2xl md:text-4xl">
                Value Objects - Your Savior from Primitive obsession
            </h1>
            <p class="text-sm md:text-base font-normal text-gray-600 pb-2">
                <i class="fas fa-calendar-week"></i>
                Feb 02, 2021
                <i class="far fa-clock"></i>
                15 min read
            </p>
        </div>

        <div class="flex flex-col justify-center items-center pb-10">
            <img class="rounded-xl w-5/5 md:w-4/6 lg:w-4/6" src="../../assets/images/posts/4334233.jpg" alt="image">
            <span class="font-sans text-xs md:text-base lg:text-base font-light text-gray-600">From Movie
                <a class="underline" href="https://www.imdb.com/title/tt0325710/mediaviewer/rm61508864/">The Last Samurai</a> on
                <a class="underline" href="https://www.imdb.com/title/tt0325710/">IMDB</a>
            </span>
        </div>
        <!-------------- </Post Head> -------------->

        <!-------------- <Post Content> -------------->
        <div class="text-gray-900">
            <p class="p-2 text-base">I believe that the best way to explain a problem is to introduce
                the problem itself first,
                I know that sounds unquestionable, but people always forget that. They jump to the solution without
                figuring out what the actual problem is, we all do that.
            </p>

            <div class="pl-2 pt-2  text-3xl">
                <h2>What is the problem?</h2>
            </div>

            <p class="p-2 text-base">Here we have an example; imagine you are building an eCommerce
                platform which allows users to sell anything and you are offering them a shipping option, and to
                determine if this item is deliverable or not you have this
                <span class="font-mono px-2 border border-gray-200 text-gray-700">ShippingRequest</span>class.
            </p>

            <p class="p-2  text-base"></p>

            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base p-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
    <span class="text-yellow-600">class</span> <span class="text-blue-600">ShippingRequest</span> {

       /**
        * @param mixed $isDeliverable
        *      - false: no need for shipping service
        *      - true:  ship my product
        *      - null:  if to be decided
        */
       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> checkAvailabilityForDelivery (<span
                        class="text-red-600">$isDeliverable</span>)
       {
            //...
       }
    }
                </code>
            </pre>

            <br>
            <p class="p-2  text-base">And since the shipping service is optional, we are allowing our
                sellers if they want to ship their product just select the delivery flag. If not, select not deliverable
                flag, or just leave it empty if you didn't decide yet, and on your side (backend) based on this value
                you have this <span class="font-mono px-2 border border-gray-200 text-gray-700">checkAvailabilityForDelivery</span>
                which accepts <span class="font-mono px-2 border border-gray-200 text-gray-700">$isDeliverable</span>
                argument, and based on this
                argument value you need to take a decision and this value might be true, false, null.
            </p>

            <br>
            <p class="p-2 text-base">And this will be your lucky day if you even got the <span
                    class="font-mono px-2 border border-gray-200 text-gray-700">TRUE</span>, <span
                    class="font-mono px-2 border border-gray-200 text-gray-700">FALSE</span>
                as bool types but you forgot that you are sending this value over HTTP request, where basically everything
                is a STRING so the TRUE will be <span
                        class="font-mono px-1 border border-gray-200 text-gray-700">"TRUE"</span> and FALSE will
                be <span
                        class="font-mono px-1 border border-gray-200 text-gray-700">"FALSE"</span>, and if you are
                working with a language
                like PHP this will not be your last problem. Yes <span
                        class="font-mono px-1 border border-gray-200 text-gray-700">"false"</span> is considered
                as true in PHP, as php translates
                that to a non-empty string value so it’s simply TRUE
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base p-2 md:p-4 border-b-4 border-blue-600">
                <code class="">
    <span class="text-blue-600">var_dump</span>(<span class="text-red-600">(bool)</span> “false”)     	// true
    <span class="text-blue-600">var_dump</span>(“false” == false)     // false
                </code>
            </pre>

            <br>
            <p class="p-2 text-base">
                Now I hear the voice in your head saying what the hell is this?
            </p>

            <br>
            <div class="h-5/6 w-5/6 lg:h-2/5 md:h-2/5 md:w-2/5 lg:w-2/5 mx-auto rounded-xl shadow bg-white dark:bg-night-20 overflow-hidden">
                <img src="/assets/images/posts/66-661421_jackie-chan-wtf-meme-jackie-chan.png" class="" alt="image">
            </div>

            <br>
            <p class="p-2 text-base">
                You may say now if the problem is, if I am accepting a <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">mixed</span> type then simply I’ll
                not use it.
                I’ll just accept only one type.
            </p>

            <p class="pl-2 text-base">
                Let's check this other example:
            </p>

            <p class="pl-2 text-base">
                You are sending a welcome email to the new registered users to your eCommerce App using this
                <span
                        class="font-mono px-1 border border-gray-200 text-gray-700">WelcomeEmail</span> class
                through <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">sendEmail</span>method.
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
    <span class="text-yellow-600">class</span> <span class="text-blue-600">WelcomeEmail</span> {

        /**
        * @param string $emailAddress
        * @param string $subject
        * @param string $body
        */
       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> sendEmail (<span
                        class="text-red-600">string $emailAddress, string $subject, string $body</span>)
       {
            //...
       }
    }
                </code>
            </pre>

            <br>
            <p class="pl-2 text-base">
                Now you are expecting a <span class="font-mono px-1 border border-gray-200 text-gray-700">string $emailAddress</span>,
                <span class="font-mono px-1 border border-gray-200 text-gray-700">string $subject</span>,
                <span class="font-mono px-1 border border-gray-200 text-gray-700">string $body</span>
                Everything looks good, so let's use it.
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
    (<span class="text-red-600">new</span> <span class="text-yellow-600">WelcomeEmail</span>())-><span
                        class="text-yellow-600">sendEmail</span>(
           "registration success",
           "glad to have u with us :)",
           "johndoe"
    );

                </code>
            </pre>

            <br>
            <div class="pl-2  text-3xl">
                <h2>You have an Issue!</h2>
            </div>

            <br>
            <p class="pl-2 text-base">
                The expected behavior: when a new user registers to your platform, that user should receive a welcome
                email.
                <br>
                But the actual behavior: the user registered, but he didn't receive any emails.
            </p>

            <br>
            <p class="pl-2 text-base">
                "If you think that you can rely on a developer's attention…"
            </p>

            <br>
            <div class="h-5/6 w-5/6 lg:h-2/5 md:h-2/5 md:w-2/5 lg:w-2/5 mx-auto rounded-xl shadow bg-white dark:bg-night-20 overflow-hidden">
                <img src="/assets/images/posts/tenor.gif" class="" alt="image">
            </div>

            <br>
            <p class="pl-2 text-base">
                So instead of having these meaningless generic arguments with string values now, we have valid
                meaningful arguments by introducing a new type that has a meaning which goes beyond being only a
                primitive type string.
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
    <span class="">final</span> <span class="text-yellow-600">class</span> <span class="text-blue-600">WelcomeEmail</span> {

        /**
        * @param EmailAddress $emailAddress
        * @param Subject $subject
        * @param Body $body
        */
       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> sendEmail (<span
                        class="text-red-600">EmailAddress $emailAddress, Subject $subject, Body $body</span>)
       {
            //...
       }
    }
                </code>
            </pre>

            <br>
            <p class="pl-2 text-base">
                This also helps you avoid mixing parameters, since the first parameter expects a type of EmailAddress
                not just a string.

                We call those new types <strong>ValueObjects.</strong>
            </p>

            <br>
            <div class="text-3xl">
                <h2>What is ValueObject?</h2>
            </div>

            <blockquote class="border-l-4 text-base border-gray-900 italic my-8 pl-8 md:pl-12">
                An object that represents a descriptive aspect of the domain with no conceptual identity is called a
                Value
                Object. Value Objects are instantiated to represent elements of the design that we care about only for
                what
                they are, not who or which they are.
                <span class="float-right pr-5">-Eric Evans-</span>
            </blockquote>

            <br>
            <div class="pl-2  text-3xl">
                <h3>Which means?</h3>
            </div>

            <br>
            <ul class="list-inside list-decimal text-base pl-8">
                <li> A value object is an object that is defined according to its value or its data rather than its
                    identity.
                </li>

                <li> A value object represents a typed value in your domain.</li>
                <li> Also, this means we are representing things that are related to each other as a compound object
                    or type.
                </li>

            </ul>

            <br>
            <span class="text-red-600 pl-4"><strong>e.g:</strong></span>
            <ul class="list-disc list-inside text-base pl-8">
                <li> A 2D coordinate consists of an X value and Y value.</li>
                <li> An mount of money consists of {number + currency}.</li>
                <li> A date range consists of {<span
                        class="font-mono px-1 border border-gray-200 text-gray-700">start_date</span> + <span
                        class="font-mono px-1 border border-gray-200 text-gray-700">end_date</span>}.
                </li>

            </ul>

            <br>
            <p class="pl-2 text-base">
                Let’s say that you have a method to calculate the distance between two points and each point has a pair
                of (x,y) values, so it might look like this:

            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">
                <code class="">
   <span class="text-blue-600">function</span> calculateDistance (<span
                        class="text-red-600">Coordinates $startPoint, Coordinates $endPoint</span>)
   {
        //...
   }
                </code>
            </pre>

            <br>
            <p class="pl-2 text-base">
                Let's take another example:
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
    <span class="text-blue-600">function</span> register (<span
                        class="text-red-600">$age</span>)
    {
        dump("your age is {$age}");
    }
                </code>
            </pre>

            <br>
            <p class="pl-2 text-base">
                This is a simple register function responsible for registering new users to your platform, so for
                simplicity, let’s have it accept only one argument which is <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">$age</span>, and then you can just
                call this
                function and give it the user’s age which is in our case 10.
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
   <span class="text-yellow-600">register</span>(10);
                </code>
            </pre>

            <br>
            <p class="pl-2 text-base">
                Then you got a new issue reported; that your <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">register</span>function accepts
                age that is zero or less than
                zero, or greater than 200 which does not make any sense.
                <br>
                So instead of that, let’s introduce a new type in our codebase called <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">Age</span>which is always
                responsible
                for giving you a valid age whenever needed.

            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
   <span class="">final</span><span class="text-yellow-600"> class</span> <span class="text-blue-600">Age</span> {

       <span class="text-yellow-600">public</span> $age;

       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> __construct (<span
                        class="text-red-600">$age</span>)
       {
           if ($age < 0 || $age > 120) {
               throw new InvalidArgumentException("provided age is invalid");
           }

           $this->age = $age;
       }

       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> __toString ()
       {
            return $this->age;
       }
    }
                </code>
            </pre>


            <br>
            <p class="pl-2 text-base">
                Then let’s modify the register function signature and instead of defining that this function accepts
                meaningless <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">$age</span> argument, it accepts a valid
                age value of type <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">Age</span> and if the user provided an
                invalid
                age value, it will throw an <span
                    class="font-mono px-1 border border-gray-200 text-gray-700">InvalidArgumentException</span> that the
                provided age value is invalid.
            </p>

            <br>
            <div class="pl-2  text-3xl">
                <h2>ValueObject Characteristics:</h2>
            </div>

            <br>
            <ul class="list-inside list-decimal pl-6">
                <li><strong>No Identity</strong></li>
                <li class="text-base ml-8 list-disc">ValueObjects are defined by their attributes or data. They are equal if their
                    attributes are
                    equal, and they are completely interchangeable.
                </li>
                <li class="text-base ml-8 list-disc">Unlike entities, they don't have an ID property.
                </li>
            </ul>

            <br>
            <div class="pl-8 ml-2">
                <h4>So what is an Identity?</h4>
            </div>

            <ul class="list-inside list-decimal pl-12">
                <li class="text-base ml-8 list-disc">an object that represents a specific thing would be an entity. E.g: <span
                        class="text-red-600">Models</span>
                    ----> represents <span class="text-red-600">Entities</span>.
                </li>
                <li class="text-base ml-8 list-disc">ValueObjects are simple Objects that represent simple things but not specific
                    things .
                </li>
            </ul>

            <p class="pl-2 ml-12 text-base pl-14">
                <span class="text-red-600">E.g</span>: Imagine you have 5 banknotes of 10$ and you asked someone to take
                a 10$ note, does it really matter which banknote he took? Isn’t the important thing is that he took a
                10$ banknote? But if we said that the police are looking for a missing 10$ banknote which has a serial
                number of 0xxxxxxx0, now this banknote has an identity.
            </p>

            <ul class="list-inside list-decimal pl-14">
                <li class="text-base ml-6 list-disc">A ValueObjects can't exist without a parent Entity owning them.
                    <br>
                    <span class="text-red-600 ml-8">E.g</span> saying an address like this (Egypt, Cairo, street number,
                    building number) doesn't provide a
                    full comprehensive statement.
                    <br>
                    <span class="ml-8">
                        But if we mention that John Doe’s address is (Egypt, Cairo, street_number, building_number) now this
                    makes complete sense.
                    </span>
                </li>

                <li class="text-base ml-8 list-disc">ValueObjects should not have separate tables in DB.</li>

                <li class="text-base ml-8 list-disc">There always must be a composition relationship between a ValueObject class
                    and an Entity class, without it ValueObjects doesn't make any sense.
                </li>
            </ul>

            <br>
            <h3 class="pl-6">2. <strong>Immutability</strong></h3>
            <ul class="list-inside list-decimal pl-8">
                <li class="text-base ml-8 list-disc"><span class="font-black">Mutable object</span>: is an object whose internal
                    state can be changed.
                </li>

                <li class="text-base ml-8 list-disc"><span class="font-black">Immutable object</span>: is an object whose internal
                    state can not be changed .
                </li>

                <li class="text-base ml-8 list-disc">The only way to change its value is by a full replacement (a new instance
                    with a new value).
                </li>

                <li class="text-base ml-8 list-disc"><span class="font-black">Immutable</span>: ---> NO SETTERS, NO PUBLIC
                    PROPERTIES, the constructor is the only injection point.
                    <br>
                    <span class="text-red-600 ml-8">E.g</span> in our previous age example, we defined <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">$age</span> property in the
                    <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">Age</span> Class as public.
                    And this means that any user of Age type <span class="ml-8">can easily change the value, so instead of that, we need to
                    change it to be </span> <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">private</span> so no one can
                    access or modify the age value.
                    <br>
                </li>
            </ul>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
$age = <span class="text-red-600">new</span> Age(10);
$age->age = 1000;
<span class="text-blue-600">register</span>(<span class="text-red-600">$age</span>); 	// 1000

                </code>
            </pre>

            <br>
            <h3 class="pl-6">3. <strong>Self Validation</strong></h3>
            <ul class="list-inside list-decimal text-base pl-8">
                <li class="ml-8 list-disc">A ValueObject must verify the validity of its attributes when being created.
                </li>
                <li class="ml-8 list-disc">An error or exception should be raised if any of the attributes are invalid.
                </li>
            </ul>

            <br>
            <div class="pl-2  text-3xl">
                <h2>Reasons for ValueObjects to exists in your codebase:</h2>
            </div>

            <br>
            <h3 class="pl-6">1. <strong>Reduce Primitive Obsession</strong></h3>
            <ul class="list-inside list-decimal pl-8">
                <li class="text-base ml-8 list-disc">Primitive Obsession is using primitive data types {int, string, float,
                    etc...} to represent domain ideas.
                    <br>
                    <span class="text-red-600 ml-6">E.g</span> we usually store a <strong>URL</strong> as a String but a
                    <strong>URL</strong> has more
                    information and specific properties Compared to a String and by storing it as <span class="ml-6">a string you can no
                    longer access these <strong>URL</strong> specific properties (The domain concept) without additional code.</span>

                    <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base mt-6 pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
              <span class="text-green-300">Host</span>	    <span class="text-yellow-600">Port</span>			             <span
                        class="text-red-600">Query Params</span>
        ┌──────┴──────┐ ┌┴┐		             ┌────────────┴───────────┐
<span class="text-yellow-600">https</span>://<span class="text-green-300">www.example.com</span>:<span
                        class="text-yellow-600">123</span><span class="text-blue-600">/forum/questions/</span>?<span
                        class="text-red-600">tag=networking&order=newest</span>
└─┬─┘				       └───────┬───────┘
<span class="text-yellow-600">Protocol</span>		                      <span class="text-blue-600">Path</span>

                </code>
            </pre>
                </li>
            </ul>

            <br>
            <h3 class="pl-6">2. <strong>Type Safety:</strong></h3>
            <ul class="list-inside list-decimal">
                <li class="text-base ml-8 list-disc">When using primitive types, it is easy to make mistakes and bugs even when we
                    are using valid types but we are passing invalid values.
                    <br>
                    <span class="text-red-600 ml-6">E.g</span>: <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">private float $duration;</span>
                    <br>
                    <span class="ml-6">Float here is a valid type and when you initialize this variable with a float value, your compiler/interpreter won’t complain about this <span
                            class="ml-6">since you're giving it a valid float value.</span></span>
                    <br>
                    <span class="ml-6">But what about the type of the <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">Duration</span> itself since the <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">Duration</span> could be (seconds, minutes, hours, etc..)?
                    </span>
                    <br>
                    <span class="ml-6">
                        You might now scratch your head and say why not just rename the variable, and
you can just mention it explicitly that you want the <span class="ml-6">duration in seconds, so it might be something like <span
                            class="font-mono px-1 border border-gray-200 text-gray-700">$durationInSeconds</span>.</span>

                    </span>
                    <br>
                    <span class="ml-6">
                        What if someone from your business team requested a new Change Request as they always do?
                        They want to display the duration in
                        <span class="ml-6">minutes and hours,
                        so now you need to convert the duration to adopt the new changes which means extra conversion code,
                        so you <span class="ml-6">might ask yourself about your options:
                        where should this conversion code reside?</span>
                    </span>
                    </span>
                </li>
                <li class="text-base ml-14 list-disc">put it inline just right before the usage! What if we decided that we need
                    to
                    use Duration in minutes somewhere else. No copy/paste. Don’t Repeat Yourself.
                </li>
                <li class="text-base ml-14 list-disc">You might put it in as a helper function in a helpers file where all the
                    evils reside. I think you need to reconsider this decision again.
                </li>
            </ul>

            <p class="text-base pl-2 ml-12">
                Let's go one step back and ask ourselves what do we really need here?
                We need to ensure that when we always ask for a valid duration we get a valid
                duration. When we ask for seconds, we get only seconds. Ask for minutes and
                we should get only minutes, etc…

                We also need to ensure our conversion code is consistent in all places in our
                codebase.
                We actually need a ValueObject to represent the Duration type in our
                domain, which will contain all the validation logic and the conversion logic.
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
   <span class="">final</span><span class="text-yellow-600"> class</span> <span class="text-blue-600">Duration</span> {

       <span class="text-yellow-600">private</span> $seconds;

       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> __construct (<span
                        class="text-red-600">int $seconds</span>)
       {
           $this->seconds = $seconds;
       }

       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> asMinutes () : int
       {
           <span class="text-red-600">return</span> (int) <span class="text-red-600">floor</span>($this->seconds / 60);
       }
    }

                </code>
            </pre>

            <br>
            <h3 class="pl-6">3. <strong>Mixing parameters:</strong></h3>

            <p class="text-base pl-2 ml-12">
                Imagine if you're using an IDE that does not support showing parameter name hints or you are just
                editing something in VIM, you can easily end up with mixing valid parameters of the same type.
            </p>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
    <span class="text-blue-600">function</span> sendShippingData (<span
                        class="text-red-600">string $courierName, string $trackingID</span>)
    {
        //...
    }


    <span class="text-blue-600">shippingData</span>("#123456", "DHL");
                </code>
            </pre>

            <br>
            <pre class="overflow-x-auto bg-gray-900 rounded text-white font-mono text-base pl-2 md:p-4 border-b-4 border-blue-600">

                <code class="">
   <span class="">final</span><span class="text-yellow-600"> class</span> <span
                        class="text-blue-600">ShippingInstrument</span> {

       <span class="text-yellow-600">private</span> $trackingID;

       <span class="text-yellow-600">private</span> $courierName;;

       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> __construct (<span
                        class="text-red-600">string $courierName, TrackingID $trackingID</span>)
       {
           if ($trackingID === "") {
           throw new InvalidArgumentException("Invalid shipping data");
       }

       $this->trackingID = $trackingID;
       $this->courierName = $courierName;

       }

       <span class="text-yellow-600">public</span> <span class="text-blue-600">function</span> getCourier ()
       {
           <span class="text-red-600">return</span> CourierStorage::where('name', $this->courierName)->first();
       }
    }

                </code>
            </pre>

            <br>
            <p class="text-base pl-2">
                You get the idea now.
            </p>

            <br>
            <h3 class="pl-6">4. <strong>Avoid Revalidating:</strong></h3>

            <p class="text-base pl-8 ml-6">
                With value objects you will stop revalidating data everywhere. You just validate it once and then after
                that you should be able to use it anywhere with confidence and guarantee that it is valid.
                This is because the only way for a value object to exist is to be valid, once it exists you can not
                change it. Immutable, do you remember?
            </p>

            <br>
            <h3 class="pl-6">5. <strong>Easy to read:</strong></h3>

            <p class="text-base pl-8 ml-6">
                Using value objects you don’t have to guess what variables truly are, you no longer have to worry about
                internal representation but think about domain concepts instead and the code now looks a lot more
                expressive.
            </p>

            <br>
            <h3 class="pl-6">6. <strong>Ensure Consistency:</strong></h3>

            <p class="text-base pl-8 ml-6">
                Check the duration example above.
            </p>

            <br>
            <div class="pl-2 text-3xl">
                <h2>Drawbacks:</h2>
            </div>

            <br>
            <ul class="list-inside list-disc ml-8">
                <li class="text-base">Wrapping every single primitive type you have with a ValueObject leads to creating too many classes,
                    and this will bloat the codebase <span class="ml-6">leading to a ridiculous codebase that you don’t want to work with.
                    So choose wisely what might be a good ValueObject candidate.</span>
                </li>
                <li class="text-base">
                    Performance issues: in some cases creating too many instances might lead to a performance drop.
                </li>
            </ul>

            <br>
            <div class="pl-2 text-3xl">
                <h2>Load your brain with ValueObjects:</h2>
            </div>

            <br>
            <p class="text-base pl-6">
                At the beginning it might be hard to recognize ValueObject candidates but with the
                passage of time, it becomes easier.
                Moreover, I found some useful tricks that you might follow:
            </p>

            <br>
            <ul class="list-inside list-disc ml-8">
                <li class="text-base">You have a special validation logic that has to be applied in multiple places.
                    <br>
                    <span class="text-red-600 ml-6">E.g</span>: phone numbers, email addresses, etc…
                </li>
                <li class="text-base">
                    You have a special formatting logic that is used to render values for humans.
                    <br>
                    <span class="text-red-600 ml-6">E.g</span>: Price = Amount + Currency
                </li>

                <li class="text-base">
                    In general, if you find yourself in a situation where you are constantly passing variables together
                    then this might be a good candidate for <span class="ml-6">a ValueObject.</span>
                </li>
            </ul>

            <br>
            <div class="pl-2 text-3xl">
                <h2>References:</h2>
            </div>

            <br>
            <ul class="list-inside list-disc ml-8">
                <li><a class="text-base text-blue-600 underline" href="https://martinfowler.com/bliki/ValueObject.html">ValueObject - Martin Fowler</a></li>
                <li><a class="text-base text-blue-600 underline" href="https://enterprisecraftsmanship.com/posts/value-objects-explained/">Value Objects explained</a></li>
                <li><a class="text-base text-blue-600 underline" href=https://laracasts.com/series/object-oriented-principles-in-php/episodes/8">Value Objects and Mutability - Laracasts</a></li>
                <li><a class="text-base text-blue-600 underline" href=https://medium.com/swlh/value-objects-to-the-rescue-28c563ad97c6">Value Objects to the rescue!</a></li>
            </ul>

        </div>


        <!-------------- </Post Content> -------------->
    </div>
</div>
<!------------------------------------ </>Container> ------------------------------------>

<!------------------------------------ <Footer> ------------------------------------>
<footer class="bg-white border-t border-gray-400 shadow w-full bottom-0 left-0">
    <div class="container max-w-4xl mx-auto flex">
        <div class="mx-auto flex flex-wrap">
            <div class="flex w-full">
                <div class="px-8 justify-center">
                    <p class="py-4 text-gray-600 text-sm">
                        © 2021 Mohamed AbdElaziz
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>
<!------------------------------------ </Footer> ------------------------------------>

<script src="../../assets/js/main.js"></script>
<script src="../../assets/js/fontawesome.min.js"></script>
</body>
</html>
